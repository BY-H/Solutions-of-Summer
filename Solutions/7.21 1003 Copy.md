## 7.21 1003 Copy

### 题意

给你一个数组，有多次操作，每次操作选择一个区间将它复制并接在后面，这个区间后面的直接顺延。

以及由多次查询，每次查询一个位置（这个位置一定在最初的数组长度`n`之内）,最后要求你输出每次查询值的异或和。

### 分析

我们如果正着做的话，就需要每次还原这个点的位置，就需要遍历每次的修改操作，这样子就会让时间复杂度达到$O(n^2)$，实际上非常容易把这样子的操作卡掉，虽然考场上能过，but我们仍然需要优化去获得更优的算法。

我们考虑倒着做，因为一个位置修改后的位置仍然可以通过逆向获得其原来的位置。

考虑用二进制来表示$1-N$中每个位置被选择的次数的奇偶。

然后逆向操作其实就是

```
101010111111  lef:6 rig:9
10101|0111|111
10101111
 0111
100101110000
```

把修改的部分