## 8.6 Eezie and Pie

### é¢˜æ„

ç»™å®šä¸€æ£µæœ‰æ ¹æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥ä¸ºå®ƒçš„` 0 ~ ğ‘‘[ğ‘–]` çº§ç¥–å…ˆè´¡çŒ® 1 çš„ä»·å€¼ã€‚æ±‚æœ€ç»ˆæ¯ä¸ªç‚¹çš„ä»·å€¼ã€‚

### åˆ†æ

å…¶å®æœ€å¤§çš„å›°éš¾åœ¨äºå¦‚ä½•å¿«é€Ÿæ±‚å®ƒçš„`d[i]`çº§ç¥–å…ˆï¼Œæ ‡å‡†é¢˜è§£ç»™çš„æ˜¯åˆ©ç”¨æ ˆï¼Œå½“ä¸€ä¸ªç‚¹è¿›æ ˆäº†ä¹‹åï¼Œå®ƒçš„ ğ‘˜ çº§ç¥–å…ˆä¸€å®šåœ¨å½“å‰æ ˆå†…å‘ä¸‹ ğ‘˜ ä¸ªã€‚ä½†æ˜¯å®é™…åœºä¸Šå¹¶æ²¡æœ‰ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè€Œæ˜¯åˆ©ç”¨äº†å€å¢ï¼Œå¿«é€Ÿå‘ä¸Šè·³ï¼Œæ—¶é—´å¤æ‚åº¦$\sum \log{d[i]}$ï¼Œå¸¸æ•°ç•¥å¾®æ§åˆ¶ä¸€ä¸‹è¿˜æ˜¯å¯ä»¥è¿‡å»çš„ã€‚

ç„¶åå°±æ˜¯åŠ ä¸Šæ ‘ä¸Šå·®åˆ†å³å¯ã€‚

```C++
#include <iostream>
#include <cstdio>
#include <cstring>
#include <cmath>
#define int long long

using namespace std;
const int maxsize = 2000100;
int n;
int fa[maxsize][21];
int head[maxsize];
struct byEdge{
	int next;
	int to;
}edge[maxsize * 2]; 
int cntEdge;
void addEdge(int u,int v){
	edge[++cntEdge].next = head[u];
	edge[cntEdge].to = v;
	head[u] = cntEdge;
}
int d[maxsize];
int depth[maxsize];
bool vis[maxsize];
void DFS(int pos,int fat){
	if(vis[pos])	return;
	vis[pos] = 1;
	depth[pos] = depth[fat] + 1;
	fa[pos][0] = fat;
	for(int i = head[pos];i;i = edge[i].next){
		int to = edge[i].to;
		DFS(to,pos);
	}
}

int dif[maxsize];
int ans[maxsize];
void queryAns(int pos){
	for(int i = head[pos];i;i = edge[i].next){
		int to = edge[i].to;
		if(to == fa[pos][0])	continue;
		queryAns(to);
		dif[pos] += dif[to];
	}
}
signed main(){
	scanf("%lld",&n);
	for(int i = 1;i < n;i++){
		int u = 0,v = 0;
		scanf("%d%d",&u,&v);
		addEdge(u,v);
		addEdge(v,u);
	}
	for(int i = 1;i <= n;i++)
		scanf("%d",&d[i]);
	depth[1] = 1;
	fa[1][0] = 0;
	DFS(1,0);
	for(int k = 1;k <= 20;k++)
		for(int i = 1;i <= n;i++)
			fa[i][k] = fa[fa[i][k - 1]][k - 1];
	for(int i = 1;i <= n;i++){
		int pos = i;
		for(int k = 20;k >= 0;k--){
			if(fa[pos][k] != 0 && depth[i] - depth[fa[pos][k]] <= d[i])
				pos = fa[pos][k];
		}
		dif[fa[pos][0]]--;
		dif[i]++;
	}
	queryAns(1);
	for(int i = 1;i <= n;i++)
		printf("%d ",dif[i]);
	return 0;
}
```

